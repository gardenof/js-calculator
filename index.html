<div class="calculator">
  <div class="display">0</div>
  <div class="buttons">
    <button class="operator" data-action="add"     >+</button>
    <button class="operator" data-action="subtract">-</button>
    <button class="operator" data-action="multiply">x</button>
    <button class="operator" data-action="divide"  >รท</button>
    <button class="number" >7</button>
    <button class="number" >8</button>
    <button class="number" >9</button>
    <button class="number" >4</button>
    <button class="number" >5</button>
    <button class="number" >6</button>
    <button class="number" >1</button>
    <button class="number" >2</button>
    <button class="number" >3</button>
    <button class="number" >0</button>
    <button class="decimal" data-action="decimal">. </button>
    <button class="clear"   data-action="clear"  >AC</button>
    <button class="equal"   data-action="equal"  >= </button>
  </div>
</div>

<script>
  buttonsDiv = document.querySelector('.buttons')
  displayDiv = document.querySelector('.display')
  numberOne  = ''
  oppOne     = ''
  numberTwo  = ''
  totalMath  = ''

  document.addEventListener("keydown", function(event) {
    displayValue = displayDiv.textContent
    if(event.which >=48 && event.which <=57){
      //numbers 0-9
      if( displayValue === '0' ||
          displayDiv.classList.value === 'display totalMath'){
          displayDiv.textContent = event.key
          displayDiv.classList.remove("totalMath")
      } else{
          displayDiv.textContent = (displayValue + event.key)
      }
    }else if (event.which >=96 && event.which <=105){
      //NumPad numbers 0-9
    }else if (event.which == 13){
      //return/enter
      document.querySelector(".equal").focus()
    }else if (event.which === 187){
      if (event.key === "+"){
          numberOne = displayValue
          oppOne = "add"
          displayDiv.textContent = "0"
      }else if(event.key === "="){
         if(oppOne){
            numberTwo = displayValue
            doMath(numberOne, oppOne, numberTwo)
          }
      }
    }
  })

  buttonsDiv.addEventListener('click', clickEvent => {
    mainFunction(clickEvent)
  })

  function mainFunction(clickEvent){
    displayValue = displayDiv.textContent
    button = clickEvent.target

    if (button.matches('button')){
      dataAction = button.dataset.action
      switch(dataAction){
        case "add":
        case "subtract":
        case "multiply":
        case "divide":
          numberOne = displayValue
          oppOne = dataAction
          displayDiv.textContent = "0"
          break;
        case "decimal":
          if( displayValue.includes(".")){
          } else{
              displayDiv.textContent = (displayValue + button.textContent)
          }
          break;
        case "clear":
          displayDiv.textContent = "0"
          break;
        case "equal":
          if(oppOne){
            numberTwo = displayValue
            doMath(numberOne, oppOne, numberTwo)
          }
          break;
        default:
          if( displayValue === '0' ||
              displayDiv.classList.value === 'display totalMath'){
              displayDiv.textContent = button.textContent
              displayDiv.classList.remove("totalMath")
          } else{
              displayDiv.textContent = (displayValue + button.textContent)
          }
      }
    }
  }

function doMath(n1,o1,n2){
  if(o1 === "add"){
    totalMath = Number(n1) + Number(n2)
    displayDiv.classList.add("totalMath")
    clearAll()
  }
  displayDiv.textContent = totalMath
}

function clearAll(){
  numberOne  = ''
  oppOne     = ''
  numberTwo  = ''
}

</script>
<style>
.buttons {
  display: grid;
  grid-template-columns: auto auto auto;
}
</style>
