<div class="calculator">
  <div class="display">0</div>
  <div class="buttons">
    <button class="operator" data-action="add"     >+</button>
    <button class="operator" data-action="subtract">-</button>
    <button class="operator" data-action="multiply">x</button>
    <button class="operator" data-action="divide"  >รท</button>
    <button class="number" >7</button>
    <button class="number" >8</button>
    <button class="number" >9</button>
    <button class="number" >4</button>
    <button class="number" >5</button>
    <button class="number" >6</button>
    <button class="number" >1</button>
    <button class="number" >2</button>
    <button class="number" >3</button>
    <button class="number" >0</button>
    <button class="decimal" data-action="decimal">.</button>
    <button class="clear"   data-action="clear"  >AC</button>
    <button class="equal"   data-action="equal"  >=</button>
  </div>
</div>

<script>
  document.querySelector(".display").focus()
  buttonsDiv = document.querySelector('.buttons')
  displayDiv = document.querySelector('.display')
  numberOne  = ''
  oppOne     = ''
  numberTwo  = ''
  totalMath  = ''

  document.addEventListener("keydown", function(event) {
    displayValue = displayDiv.textContent
    if(event.key === "*"){
      numberOne = displayValue
      oppOne = "multiply"
      displayDiv.textContent = "0"
    }else if (event.key === "+"){
      numberOne = displayValue
      oppOne = "add"
      displayDiv.textContent = "0"
    }else if (event.key === "-"){
      numberOne = displayValue
      oppOne = "subtract"
      displayDiv.textContent = "0"
    }else if (event.key === "/"){
      numberOne = displayValue
      oppOne = "divide"
      displayDiv.textContent = "0"
    }else if (event.key === "."){
      addDecimal()
    }else if((event.which >=48 && event.which <=57) ||
             (event.which >=96 && event.which <=105)){
      updatingNumberDisplay(event.key)
    }else if (event.which == 13){
      document.querySelector(".display").focus()
      equalTwoNumbers()
    }else if (event.which === 187){
      equalTwoNumbers()
    }
  })

  buttonsDiv.addEventListener('click', clickEvent => {
    mainFunction(clickEvent)
  })

  function mainFunction(clickEvent){
    displayValue = displayDiv.textContent
    button = clickEvent.target

    if (button.matches('button')){
      dataAction = button.dataset.action
      switch(dataAction){
        case "add":
        case "subtract":
        case "multiply":
        case "divide":
          numberOne = displayValue
          oppOne = dataAction
          displayDiv.textContent = "0"
          break;
        case "decimal":
          addDecimal()
          break;
        case "clear":
          displayDiv.textContent = "0"
          break;
        case "equal":
            equalTwoNumbers()
          break;
        default:
          updatingNumberDisplay(button.textContent)
      }
    }
  }


  function updatingNumberDisplay(newNumber){
    if( displayValue === '0' ||
          displayDiv.classList.value === 'display totalMath'){
          displayDiv.textContent = newNumber
          displayDiv.classList.remove("totalMath")
    } else{
          displayDiv.textContent = (displayValue + newNumber)
    }
  }

  function equalTwoNumbers(){
    if(oppOne){
      numberTwo = displayValue
      doMath(numberOne, oppOne, numberTwo)
    }
  }

  function addDecimal(){
    if(displayDiv.classList.value === 'display totalMath' ){
      displayDiv.textContent = "0."
      displayDiv.classList.remove("totalMath")
    }else if(!displayValue.includes(".")){
      displayDiv.textContent = (displayValue + ".")
    }
  }

  function doMath(n1,o1,n2){
    switch(o1){
        case "add":
            totalMath = Number(n1) + Number(n2)
        break;
        case "subtract":
            totalMath = Number(n1) - Number(n2)
        break;
        case "multiply":
            totalMath = Number(n1) * Number(n2)
        break;
        case "divide":
            totalMath = Number(n1) / Number(n2)
        break;
    }

    displayDiv.classList.add("totalMath")
    clearAll()
    displayDiv.textContent = totalMath
  }

  function clearAll(){
    numberOne  = ''
    oppOne     = ''
    numberTwo  = ''
  }

</script>
<style>
.buttons {
  display: grid;
  grid-template-columns: auto auto auto;
}
</style>
